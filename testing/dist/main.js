(()=>{"use strict";var t=[(t,e,s)=>{s.r(e);s(1),s(2),s(3);var i=s(4);window.addEventListener("DOMContentLoaded",(()=>{(0,i.init)()}))},(t,e,s)=>{s.r(e)},(t,e,s)=>{s.r(e)},,(t,e,s)=>{s.r(e),s.d(e,{init:()=>n});var i=s(5);const n=()=>{new i.default}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var i=s(6),n=s(7),o=s(9),r=s(18),a=s(29),d=s(17);class l{constructor(){this.submitResultObject=void 0,this.testingId=void 0,this._runTestingPage()}async _runTestingPage(){try{this.availableQuestion=await this._storeAvailableQuestion(),this.testingId=this.availableQuestion.testinginfo.id,this._setupAnswerObject(),this._setupTestingPageHeader(),this._setupQuestionSection(),this._setTimeCountdown(),this._bindCounterNumber()}catch(t){this._displayErrorPage()}}_bindCounterNumber(){const t=this.testingPageHeader.getTotalAnswerHtmlElement;this._callOutCounterObserver().observe(t,{childList:!0,attributes:!0,subtree:!0})}_callOutCounterObserver(){const t=this.submitResultObject.availableQuestion.length;return new MutationObserver((()=>{const e=this.submitResultObject.totalNumberOfAnswer;this.testingPageHeader._updateProgressBar(),n.isTestingFinished(t,e)&&n.changButtonSuccessText()}))}_setTimeCountdown(){this.testingPageHeader.testingTimeleft.isDurationHasValue()&&(this.countDownInterval=setInterval((()=>{this.testingPageHeader.testingTimeleft._adjustTimerDisplay(),this._updateUserCountDownTime(this.testingPageHeader.testingTimeleft.getSecondIncludeZero),this.testingPageHeader.testingTimeleft._reducingTimeLeft(),console.log(this.testingPageHeader.testingTimeleft.duration),localStorage.setItem("timeleft",this.testingPageHeader.testingTimeleft.duration),this._checkCountDownTime()}),1e3))}_checkCountDownTime(){this.testingPageHeader.testingTimeleft.isTimeUp()&&(this._alertTimeOutModal(),clearInterval(this.countDownInterval))}_updateUserCountDownTime(t){parseInt(t)<1&&this._updateUserLog()}async _updateUserLog(){try{return await(new i.default)._reqToUpdateUserTime(this.testingPageHeader.testingTimeleft.duration,this.testingId)}catch(t){console.log(t)}}async _storeAvailableQuestion(){const t=this._getTestingRequestData();return await(new i.default)._getQuestionObjects(t)}_getTestingRequestData(){const t=window.location.search.split("?")[1];return JSON.parse(decodeURIComponent(t))}_alertTimeOutModal(){const t=new d.default({trueButtonText:"ส่งคำตอบ",headerText:"การแจ้งเตือน",ModalContent:"หมดเวลาการทดสอบแล้ว",backdrop:!0});t.falseButton.remove(),t.body.classList="grey lighten-4 modal-body rounded mt-4 text-center",t.trueButton.parentNode.classList.add("m-auto"),t.trueButton.addEventListener("click",(()=>{this.questionSection._submitTestingResult()}))}_setupQuestionSection(){this.questionSection=new o.default({submitResultObject:this.submitResultObject,recentQuestion:this.availableQuestion.testinginfo.recentquestion})}_setupTestingPageHeader(){this.testingPageHeader=new r.default({testingInfo:this.availableQuestion.testinginfo,totalNumberOfAnswer:this.submitResultObject.totalNumberOfAnswer,totalNumberOfQuestion:this.availableQuestion.results.length})}_setupAnswerObject(){this.submitResultObject=new a.default({availableQuestion:this.availableQuestion.results,recentquestion:this.availableQuestion.testinginfo.recentquestion,testingid:this.availableQuestion.testinginfo.id})}_displayErrorPage(t){document.getElementById("app").innerHTML=`<div class="text-center mt-5"> <h3>ขออภัย... </h4>\n         msg: ${t}\n         <div> ขณะนี้ระบบเกิดข้อผิดพลาด กรุณารอสักครู่ หรือ ทำการติดต่อเจ้าหน้าที่ </div>\n         </div>\n         `}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor(){this.url=null}_getAllresult(){console.log(this.data)}async _requestTotest(t){return await fetch(url,{method:"POST",body:JSON.stringify({service:"testing",skill:null})})}async _reqToSendTotalResult(t){this._displayLoadingScreen();const e=this._appendObjectToFormData(t),s=await fetch("https://www.edbot.com/backbone/pages/newetesting/APIlocaltest/resulttest.php?",{method:"POST",body:e});if(!s.ok)throw"Something Went Wrong";this._unDisplayLoadingScreen();return s.json()}async _reqToGetUserSelectedSkills(){this._displayLoadingScreen();const t=await fetch("https://www.edbot.com/backbone/pages/newetesting/APIlocaltest/getObjectdata.php?",{method:"POST"});if(!t.ok)throw"Something Went Wrong";this._unDisplayLoadingScreen();const e=await t.json();return await e}async _reqToUpdateUserTime(t,e){const s=new FormData;s.append("service","updatetime"),s.append("timeleft",t),s.append("testingid",e);const i=await fetch("./ajax/logtesting.php",{method:"POST",body:s});if(!i.ok)throw"Something Went Wrong";return await i.json()}async _reqToUpdateUserLog(t){console.log(t);const e=this._appendObjectToFormData(t),s=await fetch("./ajax/logtesting.php",{method:"POST",body:e});return await s.json()}async _getQuestionObjects(t){this._displayLoadingScreen();const e=new FormData;e.append("service",t.service),e.append("skill_id",t.skill_id);const s=await fetch("https://www.edbot.com/backbone/pages/newetesting/APIlocaltest/testingObject.php?",{method:"POST",body:e});if(!s.ok)throw"Something Went Wrong";this._unDisplayLoadingScreen();return await s.json()}_appendObjectToFormData(t){const e=new FormData;return Object.entries(t).map((([t,s])=>{"service"==t?e.append(t,s):e.append(t,JSON.stringify(s))})),e}_displayLoadingScreen(){document.querySelector("#loading").classList.remove("none")}_unDisplayLoadingScreen(){document.querySelector("#loading").classList.add("none")}}},(t,e,s)=>{s.r(e),s.d(e,{activeRecentQuestion:()=>n,turnToNextQuestion:()=>o,returnToPreviousQuestion:()=>r,getBeforeThisQuestion:()=>a,_hindQuestion:()=>d,_turnNextQuestionSelectorOn:()=>l,_getActiveSelectorStatus:()=>u,_addOldStatusToClassList:()=>c,_replaceActiveSelector:()=>h,_getActiveQuestionSelector:()=>g,_getBesideActiveQuestionSelector:()=>m,_getstatusOfActiveSelector:()=>p,_turnPreviousQuestionSelectorOn:()=>b,_getSelectorByIndex:()=>w,_showQuestion:()=>v,nextQuestion:()=>_,getThisQuestionIndex:()=>y,getQuestionIndex:()=>f,getThisQuestionCategory:()=>T,getThisQuestion:()=>x,backButton:()=>S,nextButton:()=>C,turnDisabledButtonOn:()=>O,changButtonSuccessText:()=>I,totalNumberOfAnswer:()=>q,isTestingFinished:()=>A,_isThisQuestionFirstIndex:()=>B});let i=new(s(8).default)({});const n=t=>{B(t)&&O();const e=document.querySelector("[data-index='"+t+"']");v(e)},o=()=>{const t=_(),e=x();t&&(S().disabled=!1,d(e),v(t),l())},r=()=>{const t=x(),e=a(),s=f(e);B(s)&&O(),d(t),v(e),b()},a=()=>x().previousSibling,d=()=>{const t=x();t.classList.remove("active"),t.classList.add("none")},l=()=>{const t=document.querySelector("div.active");document.querySelector('div[data-selectorindex="'+t.dataset.index+'"]').className="question-selector now-question";const e=g();e.className="question-selector "+e.dataset.status},u=()=>g.dataset.status,c=()=>{g().classList.add(p())},h=()=>{const t=document.querySelector("div.now-question");t.classList.replace("now-question",t.dataset.status)},g=()=>document.querySelector("div.now-question"),m=()=>g().nextElementSibling,p=()=>g().dataset.status,b=()=>{h(),w()},w=()=>{const t=document.querySelector("div.active");document.querySelector('div[data-selectorindex="'+t.dataset.index+'"]').className="question-selector now-question"},v=t=>{t.classList.add("active"),t.classList.remove("none"),i._assignQuestionStartedTime()},_=()=>x().nextSibling,y=()=>x().dataset.index,f=t=>t.dataset.index,T=()=>Number(x().dataset.category),x=()=>document.querySelector("div.active"),S=()=>document.querySelector("#backButton"),C=()=>document.querySelector("#nextButton"),O=()=>{S().disabled=!0},I=()=>{C().textContent="จบการทดสอบ"},q=()=>{C().textContent="จบการทดสอบ"},A=(t,e)=>e===t,B=t=>1===Number(t)},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({duration:t,display:e}){this.duration=parseInt(t)||void 0,this.display=e,this.durationInterval=void 0,this.durationTimeCounter=void 0}_adjustTimerDisplay(){this.display.textContent=""+this.getTimeToStringWithOutThai}_assignQuestionStartedTime(){this._clearInterval(this.durationInterval),this.durationTimer=0,localStorage.setItem("duration",this.durationTimer),this.durationInterval=setInterval((()=>{this.durationTimer++,localStorage.setItem("duration",this.durationTimer)}),1e3)}_clearInterval(){clearInterval(this.durationInterval)}_setTimeCountdownText(){this.display.textContent=this.getTimeToStringWithOutThai}_reducingTimeLeft(){return this.duration--}isTimeUp(){return this.duration<0}isDurationHasValue(){return void 0!==this.duration}get getTimeToStringWithOutThai(){return this.isDurationHasValue()?this.getTimeStringWithOutThai:"ไม่จำกัดเวลา"}get getTimeToStringWithThai(){return this.isDurationHasValue()?this.getOnlyMinuteAndSecondString:"ไม่จำกัดเวลา"}get getOnlyMinuteAndSecondString(){return this.duration>=3600?`${this.getHour} ชั่วโมง ${this.getMinutes} นาที ${this.getSecondIncludeZero} วินาที`:this.duration<60?this.getSecondIncludeZero+" วินาที":`${this.getMinutesIncludeZero} นาที ${this.getSecondIncludeZero} วินาที`}get getHourThaiString(){return this.getHour+" ชั่วโมง"}get getHourThaiString(){return this.getMinutes+" นาที"}get getSecondThaiString(){return this.getSecond+" วินาที"}get getSecond(){return null===this.duration?null:parseInt(this.duration%60,10)}get getMinutes(){return null===this.duration?null:parseInt(this.duration/60%60,10)}get getHour(){return null===this.duration?null:parseInt(this.duration/3600%24,10)}get getHourIncludeZero(){return this.getHour<10?"0"+this.getHour:this.getHour}get getMinutesIncludeZero(){return this.getMinutes<10?"0"+this.getMinutes:this.getMinutes}get getSecondIncludeZero(){return this.getSecond<10?"0"+this.getSecond:this.getSecond}get getTimeStringWithThai(){return`${this.getHour} ชั่วโมง ${this.getMinutes} นาที `}get getTimeStringWithOutThai(){return`${this.getHourIncludeZero}:${this.getMinutesIncludeZero}:${this.getSecondIncludeZero}`}get getTimeStringMinutes(){return this.getMinutes+" นาที"}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var i=s(10),n=s(7),o=s(11),r=s(13),a=s(14),d=s(15),l=s(17),u=s(6);class c extends i.default{constructor({recentQuestion:t,submitResultObject:e}){super(),this.submitResultObject=e,this.recentQuestion=parseInt(t)||void 0,this.questionSectionElement=i.parserHtmlTag(this.questionSectionHtmlElement()),this.createQuestionSection()}createQuestionSection(){r._addWindowBeforeUnloadEvent(),this._appendToBody(this.questionSectionElement),this.generateQuestion(),this.createQuestionSelector(),this.setupButtonController()}generateQuestion(){this.submitResultObject.availableQuestion.map(((t,e)=>{new d.default({directionText:t.question,itemChoices:t.answers,questionNumber:t.index,body:this.questionSectionElement.querySelector("#question"),answered:this.submitResultObject,answeredId:t.answeredid,correctAnswer:t.correct_answerid,questionId:t.question_id,category:t.category})})),n.activeRecentQuestion(this.recentQuestion)}createQuestionSelector(){this.questionSelection=new a.default({questions:this.submitResultObject.availableQuestion,parent:this.questionSectionElement.querySelector("#questionSelector"),recentQuestion:this.recentQuestion})}_setNextButtonFunction(){this.nextButtonElement.addEventListener("click",(()=>{n.isTestingFinished(this.submitResultObject.availableQuestion.length,this.submitResultObject.totalNumberOfAnswer)&&this._showTestConfirmModal(),n.turnToNextQuestion()}))}setupButtonController(){this._setNextButtonFunction(),this._setBackButtonFunction()}_setBackButtonFunction(){this.backButtonElement.addEventListener("click",(()=>{n.returnToPreviousQuestion()}))}_showTestConfirmModal(){const t=new l.default({headerText:"ยืนยัน",ModalContent:"คุณต้องการส่งคำตอบทั้งหมด"});t.trueButton.addEventListener("click",(e=>{this._submitTestingResult(),t._destroy()}))}async _submitTestingResult(){try{const t=await(new u.default)._reqToSendTotalResult(this.submitResultObject.answerObject);o.showModalSuccess(),this._redirectToResultPage(t)}catch(t){o.throwNewErrorModal()}}_redirectToResultPage(t){r._removeBeforeUnLoadEventListener(),console.log(t);const e={result:t.result,skill:t.skill,testingid:t.testingid,timeleft:localStorage.getItem("timeleft"),totalquestion:this.submitResultObject.availableQuestion.length};encodeURIComponent(JSON.stringify(e));console.log(JSON.stringify(e))}get backButtonElement(){return this.questionSectionElement.querySelector("#backButton")}get nextButtonElement(){return this.questionSectionElement.querySelector("#nextButton")}questionSectionHtmlElement(){return'\n    <div id="contentBody" class="row m-0 flex-row-reverse justify-content-between mt-4">\n      <div  class="d-flex flex-column my-3 col-lg-3 col-sm-12 p-0" >\n          <div class="bg-white py-2 px-3 rounded" id="questionSelector">\n              <div class=\'my-3 \'>\n                  <h6 class=\'text-dark\'>ตัวเลือกคำถาม</h6>\n              </div>\n          </div>\n      </div>\n      <div id=\'question\' class="my-2 col-lg-8 col-sm-12 p-0 pr-2"></div>\n      <div id="buttonContainer" class="w-100 d-flex flex-row m-0 mb-5 mt-3 justify-content-between">\n       <button id=\'backButton\' class="col-5 btn btn-lg btn-primary text-center" type="button">ย้อนกลับ</button>\n       <button id=\'nextButton\' class="col-5 btn btn-lg btn-primary  text-center" type="button">ถัดไป</button>\n    </div>\n    </div>\n    \n  '}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i,parserHtmlTag:()=>n,_skillHeaderSectionText:()=>o,appendToParent:()=>r});class i{constructor(){this.body=document.getElementById("app")}_appendToBody(t){this.body.appendChild(t)}_insertNodeBeforeElement(t,e){this.body.insertBefore(e,t)}}const n=t=>(new DOMParser).parseFromString(t,"text/html").body.firstChild,o=t=>`<h5 class="text-dark">${t}</h5>`,r=(t,e)=>{t.appendChild(e)}},(t,e,s)=>{s.r(e),s.d(e,{showModalSuccess:()=>n,throwNewErrorModal:()=>o});var i=s(12);const n=()=>{new i.default({alertMsg:"Sucessful",type:"success"})},o=()=>{new i.default({alertMsg:"เกิดข้อผิดพลาด",type:"error"})}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({alertMsg:t,type:e}){this.alertMsg=t||"This is alert msg",this.type=e||void 0,this.body=void 0,this.parent=document.body,this._create(),this._appendDialog(),this._destroy()}_create(){this.body=document.createElement("div"),this.body.classList.add("animate__animated","animate__bounceInDown","col-3","border","shadow","bg-white","p-3","text-center","m-auto"),this.body.style.setProperty("position","fixed"),this.body.style.setProperty("top","10%"),this.body.style.setProperty("z-index","1300"),this.body.style.setProperty("left","35%");const t=document.createElement("i");switch(t.classList.add("px-1"),t.style.setProperty("vertical-align","middle"),t.style.setProperty("font-size","1.5rem"),this.type){case"success":t.classList.add("text-success","fas","fa-check-circle");break;case"error":t.classList.add("text-danger","fas","fa-times-circle")}const e=document.createElement("div");e.classList.add("text-wrap");const s=document.createElement("span");s.classList.add("text-break"),s.textContent=this.alertMsg,e.appendChild(s),this.body.appendChild(t),this.body.appendChild(e)}_appendDialog(){this.parent.appendChild(this.body)}_destroy(){setTimeout((()=>{this.parent.removeChild(this.body)}),3e3)}}},(t,e,s)=>{s.r(e),s.d(e,{_confirmBeforeUnload:()=>i,_removeBeforeUnLoadEventListener:()=>n,_addWindowBeforeUnloadEvent:()=>o});const i=t=>{var e="Dialog text here";return t.returnValue=e,e},n=()=>{window.removeEventListener("beforeunload",i)},o=()=>{window.addEventListener("beforeunload",i)}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});var i=s(7);class n{constructor({questions:t,parent:e,durationInterval:s,recentQuestion:i}){this.questions=t,this.parent=e,this.durationInterval=s||void 0,this.testingRecentQuestion=i,this.statusClassLists=["non-selected-question","marked-question","selected-question","now-question"],this.mainBody=void 0,this.toggleDownParent=void 0,this.button=void 0,this.toggleIcon=void 0,this.selector=void 0,this.countNumberOfChilds=0,this.selectorParent=void 0,this.assignQuestionTime=void 0,this.DurationTimer=0,this.storedTime=0,this._generateSelector()}_generateSelector(){this.selectorParent=document.createElement("div");const t=document.createElement("div");t.classList.add("row","m-0"),this.selectorParent.classList.add("row","collapse","multi-collapse","bg-white","m-0","show"),this.selectorParent.id="multiCollapseExample1",this.toggleDownParent=(new DOMParser).parseFromString('<div class="d-flex mt-2 align-items-center justify-content-center flex-row"></div>',"text/html").body.firstChild,this._appendAtagToToggleDownParent(),this._appendIconToATag(),this.questions.map((e=>{this.countNumberOfChilds++,this.selector=document.createElement("div"),this._setupComponentsAttribute(e),t.appendChild(this.selector),this._appendSelectorToParent(),this.selector.addEventListener("click",(t=>{this._setSelectorEvent(t.target)}))})),this.parent.appendChild(t),this.parent.appendChild(this.selectorParent),this._appendArrowParentToMainBody(),this._setArrowEvent()}_setupComponentsAttribute(t){this._isQuestionHasAnswered(t),this._applyRecentQuestionSelector(t),this.selector.textContent=t.index,this.selector.dataset.selectorindex=t.index}_isQuestionHasAnswered(t){null==t.answeredid?(this.selector.classList.add("question-selector","non-selected-question"),this.selector.dataset.status="non-selected-question"):(this.selector.classList="question-selector selected-question",this.selector.dataset.status="selected-question")}_applyRecentQuestionSelector(t){t.index==this.testingRecentQuestion&&(this.selector.classList="question-selector now-question",this.selector.dataset.status="non-selected-question")}_appendSelectorToParent(){this.selectorParent.appendChild(this.selector)}_appendIconToATag(){const t=(new DOMParser).parseFromString('<i style="font-size: 30px;" class="text-primary fas fa-caret-down"></i>',"text/html").body.firstChild;return this.toggleIcon.appendChild(t)}_appendAtagToToggleDownParent(){return this.toggleIcon=(new DOMParser).parseFromString('<a data-toggle="collapse" class="arrow-down-animated" href="#multiCollapseExample1" role="button" aria-expanded="false" aria-controls="multiCollapseExample1" class="text-primary"></a>',"text/html").body.firstChild,this.toggleDownParent.appendChild(this.toggleIcon)}_appendArrowParentToMainBody(){this.parent.appendChild(this.toggleDownParent)}_setSelectorEvent(t){this._removeActiveClass(),t.classList.remove(...this.statusClassLists),t.classList.add("now-question"),this._activeQuestionDiv(t.textContent),this._switchDisableBackButton()}_switchDisableBackButton(){1==i._getActiveQuestionSelector().textContent?document.querySelector("#backButton").disabled=!0:document.querySelector("#backButton").disabled=!1}_activeQuestionDiv(t){const e=document.querySelector('div[data-index="'+t+'"]');i._hindQuestion(),i._showQuestion(e)}_removeActiveClass(){const t=i._getActiveQuestionSelector();t.classList.remove(...this.statusClassLists),t.className="question-selector "+t.dataset.status}_setArrowEvent(){this.toggleIcon.addEventListener("click",(t=>{this.toggleIcon.classList.toggle("arrow-up-animated")}))}_arrowToggleDown(){this.toggleIcon.classList.toggle("arrow-up-animated")}_showQuestion(t){t.classList.add("active"),this._assignQuestionStartedTime(),this._getDurationInterval()}_hindQuestion(){const t=document.querySelector("div.active");t.classList.remove("active"),t.classList.add("none")}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>o,_getIndexOfAnswer:()=>r});var i=s(6),n=s(16);class o{constructor({directionText:t,itemChoices:e,questionNumber:s,body:i,answered:n,correctAnswer:o,questionId:r,answeredId:a,category:d}){this.directionText=t||"lorem",this.itemChoices=e||null,this.questionNumber=s||null,this.body=i||void 0,this.totalAnswers=n||void 0,this.correctAnswer=o||void 0,this.answeredId=a||void 0,this.questionId=r||void 0,this.category=parseInt(d)||void 0,this.choiceid=null,this.mainContainer=void 0,this.mainBody=void 0,this.itemContainers=void 0,this.radioInput=void 0,this.radioLabel=void 0,this._createQuestion(),this._generateChoices(this.itemChoices),this._apppendChild()}_createQuestion(){this.mainContainer=document.createElement("div"),this.mainBody=document.createElement("div"),this.mainBody.classList.add("py-3","none"),this.mainBody.dataset.index=this.questionNumber,this.mainBody.dataset.category=this.category,this.mainBody.dataset.id=this.questionId,this.mainContainer.appendChild(this.mainBody);const t=document.createElement("div");t.classList.add("d-flex","flex-row","text-dark");const e=(new DOMParser).parseFromString(this.directionText,"text/html").body.firstChild;e.classList.add("h2"),e.innerHTML=`${this.questionNumber}. ${e.innerHTML}`,t.appendChild(e),this.mainBody.appendChild(t)}_generateChoices(t){this.itemContainers=document.createElement("div"),this.itemContainers.classList.add("py-3","bg-light","d-flex","flex-column"),t.map((t=>{const e=new n.default({id:t.id,statement:t.statment,questionnumber:this.questionNumber,body:this.itemContainers,answeredId:this.answeredId});this._setupRadioLabelEventListener(e.radioLabel)})),this.mainBody.appendChild(this.itemContainers)}_setupRadioLabelEventListener(t){t.addEventListener("click",(()=>{if(this._getAnswerCatagory()){this.choiceid=parseInt(t.dataset.choices),this._checkActiveLabel(),this._appendAnswerToJson(),this._updateUserLogToServer(),t.classList.add("active");document.querySelector("div.now-question").dataset.status="selected-question"}}))}_getDuration(){return Number(localStorage.getItem("duration"))}_pushDataToAnswerJson(){this._updateAnswerCounter(),this.totalAnswers.totalNumberOfAnswer++,this.totalAnswers.answerObject.recentquestion=this.questionNumber,this._getAnswerCatagory().answers.push({choiceid:this.choiceid,questionid:parseInt(this.questionId),correct_answerid:this.correctAnswer,duration:this._getDuration()})}_appendAnswerToJson(){-1===this._getIndexOfAnswer()?(this._pushDataToAnswerJson(),console.log("Req total push answer",this.totalAnswers.answerObject)):(console.log("total answer",this.totalAnswers.answerObject),this._changeAnsweredQuestion())}_updateTimeleft(){}_getCurrentUserLogJson(){const t=this._getAnswerCatagory().answers[this._getIndexOfAnswer()];return{service:"updateresult",recentquestion:this._getRecentQuestion(),testingid:this.totalAnswers.answerObject.testingid,questionid:parseInt(this.questionId),correct_answerid:this.correctAnswer,choiceid:this.choiceid,duration:t.duration}}_getRecentQuestion(){return this.totalAnswers.answerObject.recentquestion<this.questionNumber?this.questionNumber:this.totalAnswers.answerObject.recentquestion}async _updateUserLogToServer(){(new i.default)._reqToUpdateUserLog(this._getCurrentUserLogJson())}_checkActiveLabel(){this.itemContainers.querySelector("label.active")&&this.itemContainers.querySelector("label.active").classList.remove("active")}_updateAnswerCounter(){const t=this._getCounterNumberElement();this._getTotalNumberOfQuestionElement().textContent;let e=parseInt(this._getCounterNumberElement().textContent);e++,t.textContent=""+e}_getTotalNumberOfQuestion(){return parseInt(this._getTotalNumberOfQuestionElement().textContent.split("/")[1])}_getTotalNumberOfQuestionElement(){return document.querySelector("#totalQuestionNumber")}_getAnswerCatagory(){try{if(-1==this._checkIndexOfCategoryItem())throw this.category+" Categoryid was not found, Please check category inside result object below ⬇️";return this.totalAnswers.answerObject.items[this._checkIndexOfCategoryItem()]}catch(t){console.warn(t),console.log(this.totalAnswers.answerObject)}}_getIndexOfAnswer(){try{if(this._getAnswerCatagory()){return this._getAnswerCatagory().answers.findIndex((t=>t.questionid==this.questionId))}}catch(t){console.log(t)}}_checkIndexOfCategoryItem(){return this.totalAnswers.answerObject.items.findIndex((t=>t.category==this.category))}_changeAnsweredQuestion(){if(this._getAnswerCatagory()){const t=this._getAnswerCatagory().answers[this._getIndexOfAnswer()],e=t.duration+this._getDuration();t.choiceid=this.choiceid,t.duration=e}}_getTotalNumberOfAnswer(){return this.totalAnswers.answerObject.items.length}_setUpLogsRecentQuestion(){}_getCounterNumberElement(){return document.querySelector("#counterNumber")}_apppendChild(){this.body.appendChild(this.mainBody)}}const r=(t,e)=>t.items.findIndex((t=>t.category==e))},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({id:t,statement:e,questionnumber:s,prefix:i,body:n,answeredId:o}){this.id=t||void 0,this.statement=e||void 0,this.questionNumber=s||void 0,this.parentBody=n||void 0,this.answeredId=o||void 0,this.radioInput=void 0,this.radioLabel=void 0,this._createChoice(),this._appendToBody()}_createChoice(){this._createInput(),this._createInputLabel()}_createInput(){this.radioInput=document.createElement("input"),this.radioInput.type="radio",this.radioInput.id=this.id,this.radioInput.name="questionNumber"+this.questionNumber,this.radioInput.classList.add("choice","none")}_createInputLabel(){this.radioLabel=document.createElement("label"),this.radioLabel.setAttribute("for",this.id);const t=(new DOMParser).parseFromString(this.statement,"text/html").body.firstChild;t.classList.add("answer-selector"),t.textContent=""+t.textContent,this.radioLabel.appendChild(t),this.radioLabel.classList.add(...this._generateClassList(this.id)),this.radioLabel.dataset.choices=this.id}_generateClassList(){const t=["btn-lg","btn-white","p-3","rounded","text-dark"];return this.id==this.answeredId&&t.push("active"),t}_appendToBody(){this.parentBody.appendChild(this.radioInput),this.parentBody.appendChild(this.radioLabel)}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({headerText:t,ModalContent:e,modalId:s,skillQueryString:i,backdrop:n}){this.headerText=t||"Agreement",this.trueButtonText="ตกลง",this.falseButtonText="ยกเลิก",this.modalContent=e||"เนื้อหา..",this.skillQueryString=i||void 0,this.modalId=s||"modalExample",this.static=1!=n||"static",this.modal=void 0,this.body=void 0,this.trueButton=void 0,this.falseButton=void 0,this.parent=document.body,this._createModal(),this._appendDialog(),this._show()}_createModal(){this.modal=document.createElement("div"),this.modal.setAttribute("id",this.modalId),this.modal.setAttribute("tabindex","-1"),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-hidden","true"),this.modal.setAttribute("aria-labelledby",this.modalId),this.modal.classList.add("modal","fade"),this.modal.dataset.backdrop=this.static;const t=document.createElement("div");t.classList.add("modal-dialog","modal-dialog-scrollable"),t.setAttribute("role","document"),this.modal.appendChild(t);const e=document.createElement("div");e.classList.add("modal-content","m-auto"),t.appendChild(e);const s=document.createElement("div"),i=document.createElement("h4");i.classList.add("modal-title"),i.id=this.headerText,i.textContent=this.headerText,s.appendChild(i),s.classList.add("modal-header"),e.appendChild(s),this.body=document.createElement("div"),this.body.classList.add("grey","lighten-4","modal-body","rounded","p-4","m-3");const n=document.createElement("p");n.classList.add("font-weight-light","text-dark"),n.innerText=this.modalContent,this.body.appendChild(n),e.appendChild(this.body);const o=document.createElement("div");o.classList.add("modal-footer","border-0"),this.falseButton=document.createElement("button"),this.falseButton.classList.add("btn","btn-outline-primary","btn-lg"),this.falseButton.type="button",this.falseButton.setAttribute("data-dismiss","modal"),this.falseButton.textContent=this.falseButtonText,this.falseButton.addEventListener("click",(()=>{this._destroy()})),o.appendChild(this.falseButton),this.trueButton=document.createElement("a"),this.trueButton.classList.add("btn","btn-primary","btn-lg","text-white"),this.trueButton.style.setProperty("cursor","pointer"),this.trueButton.textContent=this.trueButtonText,o.appendChild(this.trueButton),e.appendChild(o)}_appendDialog(){document.body.appendChild(this.modal),console.log(this.modal)}_destroy(){$("#"+this.modalId).modal("hide"),setTimeout((()=>{this.parent.removeChild(this.modal)}),200)}_show(){$("#"+this.modalId).modal("show")}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s(10),n=s(8),o=s(19);class r extends i.default{constructor({testingInfo:t,totalNumberOfAnswer:e,totalNumberOfQuestion:s}){super(),this.testingInfo=t||void 0,this.parent=parent||void 0,this.totalNumberOfAnswer=e,this.totalNumberOfQuestion=s||void 0,this.questionHeaderHtmlElement=i.parserHtmlTag(this._questionHeaderHtmlElementTag()),this._createTestingPageHeader()}_createTestingPageHeader(){this._appendToBody(this.questionHeaderHtmlElement),this.setupTestingTimeleft(),this._setupProgressBar()}_setupProgressBar(){this.testingProgressBar=new o.default({progressbarparent:this.questionHeaderHtmlElement.querySelector("#progressBar"),actualValue:this.totalNumberOfAnswer,maximumValue:this.totalNumberOfQuestion}),this.testingProgressBar._setInitiatedProgressBarValue()}setupTestingTimeleft(){this.testingTimeleft=new n.default({duration:this.testingInfo.timeleft,display:this.questionHeaderHtmlElement.querySelector("#timer")}),this.testingTimeleft._setTimeCountdownText()}_setTimeCountdown(){null!=this.testingTimeleft.duration&&this._startTimer(this.timerText)}_questionSecondTextHeader(t){return"PRE-TEST"==t.replace(/ /g,"")?"แบบทดสอบก่อนเรียน":"แบบทดสอบหลังเรียน"}get getTotalAnswerHtmlElement(){return this.questionHeaderHtmlElement.querySelector("#counterNumber")}get getTotalQuestionNumberHtmlElement(){return this.questionHeaderHtmlElement.querySelector("#totalQuestionNumber")}_updateProgressBar(){this.testingProgressBar._updateProgressBarPerTime()}get getTotalNumberOfAnswer(){return this.totalNumberOfAnswer}get getTotalNumberOfQuestion(){return this.totalNumberOfQuestion}get getTestingPageHeaderElement(){return this.questionHeaderHtmlElement}get getTestingName(){return this.testingInfo.type.split("con")[0].toUpperCase()}_questionHeaderHtmlElementTag(){return`<div class="bg-white rounded py-2">\n    <div class="d-flex justify-content-around flex-column ">\n        <div class="d-flex justify-content-between align-items-center flex-row px-3 ">\n            <div class="d-flex flex-column p-1">\n                <div class="">\n                    <h5 class="text-dark font-weight-bold" id='testMainTextHeader'>${this.getTestingName}</h5>\n                    <h6 id="testSecondTextHeader">${this._questionSecondTextHeader(this.testingInfo.type)}</h6>\n                </div>\n            </div>\n  \n            <div class="d-flex flex-column p-1">\n                <div>\n                    <small class="text-secondary font-weight-light">เวลาที่เหลือ</small>\n                    <h5 id="timer" class="text-primary font-weight-light"></h5>\n                </div>\n            </div>\n  \n            <div class="d-flex flex-column p-1">\n                <div class="d-flex flex-column">\n                    <small class="text-secondary font-weight-light">จำนวนข้อ</small>\n                    <div id="timeCounterParent" class="d-flex flex-row p-0 align-items-center">\n                        <h4 class="text-primary font-weight-light" id="counterNumber">${this.getTotalNumberOfAnswer} </h4>\n                        <h4 class="text-primary font-weight-light" id="totalQuestionNumber">/${this.getTotalNumberOfQuestion}</h4>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id="progressBar"></div>\n    </div>\n  </div>\n        `}}},(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var i=s(20),n=s.n(i);class o{constructor({progressbarparent:t,actualValue:e,maximumValue:s,options:i}){this.progressBar=void 0,this.progressBarParent=t||void 0,this.options=i||void 0,this.actualValue=e||void 0,this.valuePerUpdateTime=1/s,this.currentValueOfProgressBar=e/s,this._renderProgressBar()}_renderProgressBar(){this.progressBar=new(n().Line)(this.progressBarParent,this.options||{color:"#1CC88A",trailColor:"#D1D3E2",svgStyle:{width:"100%",height:"10px"}})}_getCurrentValueOfProgressBar(){return Number((this.actualValue/maximumValue).toFixed(10))}_setInitiatedProgressBarValue(){this.progressBar.animate(Number(this.currentValueOfProgressBar.toFixed(10)))}_updateProgressBarPerTime(){this.currentValueOfProgressBar+=this.valuePerUpdateTime,this.progressBar.animate(Number(this.currentValueOfProgressBar.toFixed(10))),localStorage.setItem("progressbarvalue",this.currentValueOfProgressBar)}}},,,,,,,,,,(t,e,s)=>{s.r(e),s.d(e,{default:()=>i});class i{constructor({availableQuestion:t,recentquestion:e,testingid:s}){this.availableQuestion=t||void 0,this.answerObject={service:"submitresult",recentquestion:parseInt(e),testingid:parseInt(s),items:[]},this.totalNumberOfAnswer=0,this.setAnswerObject(this.availableQuestion.length),this.setExistedItemToAnswerObject()}pushCategoryToAnswerObject(t){this.answerObject.items.push({category:t,answers:[],totalquestion:this.getEachSkillsNumberOfTotalQuestion(t)})}setExistedItemToAnswerObject(){this.availableQuestion.map((t=>{this._pushExistAnswerToAnswerObject(t)}))}_pushExistAnswerToAnswerObject(t){null!=t.answeredid&&(this.totalNumberOfAnswer++,this.answerObject.items[this._getIndexOfAnswerCategory(t)].answers.push({choiceid:parseInt(t.answeredid),questionid:parseInt(t.question_id),correct_answerid:t.correct_answerid,questionindex:parseInt(t.index),duration:0}))}setAnswerObject(t){return 0===t?0:(-1===this.isAnswerObjectHasAvailableQuestionCategory(parseInt(this.availableQuestion[t-1].category))&&this.pushCategoryToAnswerObject(parseInt(this.availableQuestion[t-1].category)),this.setAnswerObject(t-1))}isAnswerObjectHasAvailableQuestionCategory(t){return this.answerObject.items.findIndex((e=>e.category==t))}getEachSkillsNumberOfTotalQuestion(t){return this.availableQuestion.filter((e=>e.category==t)).length}_getIndexOfAnswerCategory(t){return this.answerObject.items.findIndex((e=>e.category==parseInt(t.category)))}}}],e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}s.m=t,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={0:0},e=[[0,1]],i=()=>{};function n(){for(var i,n=0;n<e.length;n++){for(var o=e[n],r=!0,a=1;a<o.length;a++){var d=o[a];0!==t[d]&&(r=!1)}r&&(e.splice(n--,1),i=s(s.s=o[0]))}return 0===e.length&&(s.x(),s.x=()=>{}),i}s.x=()=>{s.x=()=>{},r=r.slice();for(var t=0;t<r.length;t++)o(r[t]);return(i=n)()};var o=n=>{for(var o,r,[d,l,u,c]=n,h=0,g=[];h<d.length;h++)r=d[h],s.o(t,r)&&t[r]&&g.push(t[r][0]),t[r]=0;for(o in l)s.o(l,o)&&(s.m[o]=l[o]);for(u&&u(s),a(n);g.length;)g.shift()();return c&&e.push.apply(e,c),i()},r=self.webpackChunktesting=self.webpackChunktesting||[],a=r.push.bind(r);r.push=o})(),s.x()})();